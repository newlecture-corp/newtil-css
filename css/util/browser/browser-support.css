/* ===== BROWSER COMPATIBILITY UTILITIES ===== */
/* CSS 속성명과 값을 그대로 유지하는 NewTil CSS 철학 */
/* 브라우저 호환성: vendor prefixes, feature detection, fallbacks 등 */

/* ===== VENDOR PREFIXES (벤더 프리픽스) ===== */

/* Transform 호환성 */
.transform-compat {
	-webkit-transform: var(--transform, none) !important;
	-moz-transform: var(--transform, none) !important;
	-ms-transform: var(--transform, none) !important;
	-o-transform: var(--transform, none) !important;
	transform: var(--transform, none) !important;
}

/* Transition 호환성 */
.transition-compat {
	-webkit-transition: var(--transition, all 0.3s ease) !important;
	-moz-transition: var(--transition, all 0.3s ease) !important;
	-ms-transition: var(--transition, all 0.3s ease) !important;
	-o-transition: var(--transition, all 0.3s ease) !important;
	transition: var(--transition, all 0.3s ease) !important;
}

/* Animation 호환성 */
.animation-compat {
	-webkit-animation: var(--animation, none) !important;
	-moz-animation: var(--animation, none) !important;
	-ms-animation: var(--animation, none) !important;
	-o-animation: var(--animation, none) !important;
	animation: var(--animation, none) !important;
}

/* Box Shadow 호환성 */
.box-shadow-compat {
	-webkit-box-shadow: var(--shadow, none) !important;
	-moz-box-shadow: var(--shadow, none) !important;
	box-shadow: var(--shadow, none) !important;
}

/* Border Radius 호환성 */
.border-radius-compat {
	-webkit-border-radius: var(--radius, 0) !important;
	-moz-border-radius: var(--radius, 0) !important;
	border-radius: var(--radius, 0) !important;
}

/* Linear Gradient 호환성 */
.linear-gradient-compat {
	background: var(--gradient-fallback, #ffffff) !important; /* 폴백 색상 */
	background: -webkit-linear-gradient(
		var(--gradient-direction, top),
		var(--gradient-stops)
	) !important;
	background: -moz-linear-gradient(
		var(--gradient-direction, top),
		var(--gradient-stops)
	) !important;
	background: -ms-linear-gradient(
		var(--gradient-direction, top),
		var(--gradient-stops)
	) !important;
	background: -o-linear-gradient(
		var(--gradient-direction, top),
		var(--gradient-stops)
	) !important;
	background: linear-gradient(
		var(--gradient-direction, to bottom),
		var(--gradient-stops)
	) !important;
}

/* ===== FLEXBOX COMPATIBILITY (플렉스박스 호환성) ===== */

/* 구 버전 Flexbox 지원 */
.flex-compat {
	display: -webkit-box !important; /* iOS 6-, Safari 3.1-6 */
	display: -moz-box !important; /* Firefox 19- */
	display: -ms-flexbox !important; /* IE 10 */
	display: -webkit-flex !important; /* Chrome */
	display: flex !important; /* 표준 */
}

.flex-direction-row-compat {
	-webkit-box-orient: horizontal !important;
	-webkit-box-direction: normal !important;
	-webkit-flex-direction: row !important;
	-ms-flex-direction: row !important;
	flex-direction: row !important;
}

.flex-direction-column-compat {
	-webkit-box-orient: vertical !important;
	-webkit-box-direction: normal !important;
	-webkit-flex-direction: column !important;
	-ms-flex-direction: column !important;
	flex-direction: column !important;
}

.justify-content-center-compat {
	-webkit-box-pack: center !important;
	-webkit-justify-content: center !important;
	-ms-flex-pack: center !important;
	justify-content: center !important;
}

.align-items-center-compat {
	-webkit-box-align: center !important;
	-webkit-align-items: center !important;
	-ms-flex-align: center !important;
	align-items: center !important;
}

.flex-1-compat {
	-webkit-box-flex: 1 !important;
	-webkit-flex: 1 !important;
	-ms-flex: 1 !important;
	flex: 1 !important;
}

/* ===== GRID COMPATIBILITY (그리드 호환성) ===== */

/* CSS Grid 호환성 */
.grid-compat {
	display: -ms-grid !important; /* IE 10-11 */
	display: grid !important; /* 표준 */
}

/* IE Grid 폴백 */
@supports not (display: grid) {
	.grid-compat {
		display: flex !important;
		flex-wrap: wrap !important;
	}

	.grid-compat > * {
		flex: 1 !important;
		min-width: 0 !important;
	}
}

/* ===== USER SELECT COMPATIBILITY (사용자 선택 호환성) ===== */

.user-select-none-compat {
	-webkit-user-select: none !important;
	-moz-user-select: none !important;
	-ms-user-select: none !important;
	user-select: none !important;
}

.user-select-all-compat {
	-webkit-user-select: all !important;
	-moz-user-select: all !important;
	-ms-user-select: all !important;
	user-select: all !important;
}

.user-select-text-compat {
	-webkit-user-select: text !important;
	-moz-user-select: text !important;
	-ms-user-select: text !important;
	user-select: text !important;
}

/* ===== APPEARANCE COMPATIBILITY (외형 호환성) ===== */

.appearance-none-compat {
	-webkit-appearance: none !important;
	-moz-appearance: none !important;
	-ms-appearance: none !important;
	appearance: none !important;
}

/* ===== BACKDROP FILTER COMPATIBILITY (백드롭 필터 호환성) ===== */

.backdrop-filter-compat {
	-webkit-backdrop-filter: var(--backdrop-filter, none) !important;
	backdrop-filter: var(--backdrop-filter, none) !important;
}

/* 백드롭 필터 미지원 시 폴백 */
@supports not (backdrop-filter: blur(1px)) and not
	(-webkit-backdrop-filter: blur(1px)) {
	.backdrop-filter-fallback {
		background-color: rgba(255, 255, 255, 0.8) !important;
	}

	.backdrop-filter-fallback.dark {
		background-color: rgba(0, 0, 0, 0.8) !important;
	}
}

/* ===== STICKY POSITION COMPATIBILITY (스티키 포지션 호환성) ===== */

.sticky-compat {
	position: -webkit-sticky !important;
	position: sticky !important;
}

/* Sticky 미지원 시 폴백 */
@supports not (position: sticky) {
	.sticky-fallback {
		position: fixed !important;
		top: 0 !important;
		z-index: var(--z-index-fixed, 1000) !important;
	}
}

/* ===== OBJECT FIT COMPATIBILITY (오브젝트 핏 호환성) ===== */

.object-fit-cover-compat {
	object-fit: cover !important;
	object-position: center !important;
}

/* Object-fit 미지원 시 폴백 */
@supports not (object-fit: cover) {
	.object-fit-cover-fallback {
		position: relative !important;
		overflow: hidden !important;
	}

	.object-fit-cover-fallback img {
		position: absolute !important;
		top: 50% !important;
		left: 50% !important;
		transform: translate(-50%, -50%) !important;
		min-width: 100% !important;
		min-height: 100% !important;
		width: auto !important;
		height: auto !important;
	}
}

/* ===== ASPECT RATIO COMPATIBILITY (종횡비 호환성) ===== */

/* Aspect Ratio 호환성 (padding-top hack) */
@supports not (aspect-ratio: 1 / 1) {
	.aspect-ratio-fallback {
		position: relative !important;
		overflow: hidden !important;
	}

	.aspect-ratio-fallback::before {
		content: "" !important;
		display: block !important;
		padding-top: var(--aspect-ratio-percent, 100%) !important;
	}

	.aspect-ratio-fallback > * {
		position: absolute !important;
		top: 0 !important;
		left: 0 !important;
		width: 100% !important;
		height: 100% !important;
	}
}

/* ===== SCROLL BEHAVIOR COMPATIBILITY (스크롤 동작 호환성) ===== */

.scroll-smooth-compat {
	scroll-behavior: smooth !important;
}

/* Smooth scroll 미지원 시 폴백 */
@supports not (scroll-behavior: smooth) {
	.scroll-smooth-js {
		/* JavaScript로 부드러운 스크롤 구현 필요 */
		scroll-behavior: auto !important;
	}
}

/* ===== CONTAINER QUERIES COMPATIBILITY (컨테이너 쿼리 호환성) ===== */

/* Container Queries 미지원 시 폴백 */
@supports not (container-type: inline-size) {
	.container-fallback {
		/* 미디어 쿼리로 대체 */
		width: 100% !important;
	}

	@media (min-width: 400px) {
		.container-fallback {
			/* 컨테이너 쿼리 대신 미디어 쿼리 사용 */
		}
	}
}

/* ===== CLAMP FUNCTION COMPATIBILITY (clamp 함수 호환성) ===== */

/* clamp() 미지원 시 폴백 */
@supports not (font-size: clamp(1rem, 4vw, 2rem)) {
	.clamp-fallback {
		font-size: 1.25rem !important; /* 중간값으로 폴백 */
	}

	@media (min-width: 768px) {
		.clamp-fallback {
			font-size: 1.5rem !important;
		}
	}

	@media (min-width: 1200px) {
		.clamp-fallback {
			font-size: 2rem !important;
		}
	}
}

/* ===== CUSTOM PROPERTIES COMPATIBILITY (CSS 변수 호환성) ===== */

/* CSS Variables 미지원 시 폴백 */
@supports not (color: var(--primary-color)) {
	.css-variables-fallback {
		/* 하드코딩된 값으로 폴백 */
		color: #007bff !important;
		background-color: #ffffff !important;
		border-color: #dee2e6 !important;
	}
}

/* ===== INTERNET EXPLORER SPECIFIC (Internet Explorer 전용) ===== */

/* IE 조건부 클래스 */
.ie-only {
	display: none !important;
}

/* IE에서만 표시 */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
	.ie-only {
		display: block !important;
	}

	.ie-hide {
		display: none !important;
	}
}

/* IE 그리드 레이아웃 수정 */
@supports (-ms-grid-columns: 1fr) {
	.ie-grid-fix {
		-ms-grid-columns: 1fr !important;
		-ms-grid-rows: auto !important;
	}
}

/* ===== SAFARI SPECIFIC (Safari 전용) ===== */

/* Safari 버그 수정 */
@supports (-webkit-touch-callout: none) {
	.safari-fix {
		-webkit-transform: translateZ(0) !important; /* 하드웨어 가속 */
	}
}

/* iOS Safari 뷰포트 높이 수정 */
@supports (-webkit-touch-callout: none) {
	.ios-viewport-fix {
		height: -webkit-fill-available !important;
	}
}

/* ===== FIREFOX SPECIFIC (Firefox 전용) ===== */

/* Firefox 스크롤바 스타일링 */
@-moz-document url-prefix() {
	.firefox-scrollbar {
		scrollbar-width: thin !important;
		scrollbar-color: var(--color-base-4) var(--color-base-1) !important;
	}
}

/* ===== FEATURE DETECTION (기능 감지) ===== */

/* Hover 지원 감지 */
@media (hover: hover) {
	.hover-supported:hover {
		background-color: var(--color-base-2) !important;
		transform: translateY(-2px) !important;
	}
}

@media (hover: none) {
	.hover-not-supported {
		/* 터치 디바이스용 스타일 */
		padding: var(--space-4) !important;
		font-size: 1.125rem !important;
	}
}

/* Pointer 정밀도 감지 */
@media (pointer: fine) {
	.fine-pointer {
		/* 마우스/트랙패드용 */
		cursor: pointer !important;
	}
}

@media (pointer: coarse) {
	.coarse-pointer {
		/* 터치용 */
		min-height: 44px !important; /* 터치 최소 크기 */
		min-width: 44px !important;
	}
}

/* ===== REDUCED MOTION COMPATIBILITY (모션 감소 호환성) ===== */

/* 모션 감소 미지원 시 폴백 */
.motion-safe {
	animation: var(--animation, none) !important;
	transition: var(--transition, all 0.3s ease) !important;
}

@media (prefers-reduced-motion: reduce) {
	.motion-safe {
		animation: none !important;
		transition: none !important;
	}
}

/* ===== HIGH CONTRAST MODE COMPATIBILITY (고대비 모드 호환성) ===== */

/* Windows 고대비 모드 감지 */
@media (-ms-high-contrast: active) {
	.high-contrast-mode {
		border: 1px solid !important;
		background: ButtonFace !important;
		color: ButtonText !important;
	}
}

/* ===== COLOR SCHEME COMPATIBILITY (색상 스킴 호환성) ===== */

/* 다크 모드 미지원 시 폴백 */
@media (prefers-color-scheme: dark) {
	.dark-mode-supported {
		background-color: var(--color-base-9) !important;
		color: var(--color-white) !important;
	}
}

/* 다크 모드 감지 불가능한 경우 */
@supports not (color-scheme: dark) {
	.dark-mode-fallback {
		/* JavaScript로 다크 모드 토글 구현 필요 */
	}
}

/* ===== PRINT COMPATIBILITY (프린트 호환성) ===== */

/* 프린트 시 웹폰트 폴백 */
@media print {
	.print-font-fallback {
		font-family: "Times New Roman", serif !important;
	}

	.print-safe {
		color: black !important;
		background: white !important;
		text-shadow: none !important;
		box-shadow: none !important;
	}
}

/* ===== BROWSER DETECTION UTILITIES (브라우저 감지 유틸리티) ===== */

/* Chromium 기반 브라우저 감지 */
@supports (-webkit-appearance: none) and (not (-moz-appearance: none)) {
	.chromium-only {
		display: block !important;
	}
}

/* WebKit 기반 브라우저 감지 */
@supports (-webkit-appearance: none) {
	.webkit-only {
		display: block !important;
	}
}

/* Gecko 기반 브라우저 감지 */
@supports (-moz-appearance: none) {
	.gecko-only {
		display: block !important;
	}
}

/* ===== PERFORMANCE OPTIMIZATION (성능 최적화) ===== */

/* GPU 가속 활성화 */
.gpu-accelerated {
	-webkit-transform: translateZ(0) !important;
	-moz-transform: translateZ(0) !important;
	-ms-transform: translateZ(0) !important;
	-o-transform: translateZ(0) !important;
	transform: translateZ(0) !important;

	/* will-change 최적화 */
	will-change: var(--will-change, auto) !important;
}

/* 하드웨어 가속 비활성화 */
.no-gpu-acceleration {
	transform: none !important;
	will-change: auto !important;
}

/* ===== POLYFILL HINTS (폴리필 힌트) ===== */

/* JavaScript 폴리필이 필요한 기능들 */
.needs-polyfill {
	/* 
	필요한 폴리필들:
	- IntersectionObserver
	- ResizeObserver
	- CustomEvent
	- Object.assign
	- Array.from
	- Promise
	- fetch
	*/
}

/* 폴리필 로드 완료 후 활성화되는 클래스 */
.polyfill-loaded .feature-enhanced {
	/* 폴리필 의존 기능들 */
}

/* ===== CRITICAL CSS OPTIMIZATION (중요 CSS 최적화) ===== */

/* Above the fold 콘텐츠 */
.critical-css {
	/* 중요한 스타일만 포함 */
	display: block !important;
	position: relative !important;
	margin: 0 !important;
	padding: 0 !important;
}

/* 지연 로드 콘텐츠 */
.non-critical {
	/* 나중에 로드될 스타일들 */
}
